# v0.3.4 Examples Rework

**Release Date:** 2025-11-15
**Type:** Enhancement (non-breaking)

## Overview

Complete overhaul of the examples directory, replacing old nested structure with 4 focused, well-documented examples demonstrating core PyVR functionality. This release emphasizes clean code, comprehensive inline comments, and copy-paste usability for new users.

## Changes

### Examples Structure Redesign

**Before (v0.3.3):**
- Nested directory: `example/ModernglRender/`
- 5 example scripts with version-specific names
- Orphaned directories: `pyvr/`, `tests/`
- Mixed documentation quality
- Some examples with temporal language (e.g., "new in v0.3.1")

**After (v0.3.4):**
- Flat directory: `example/`
- 4 focused example scripts
- No orphaned directories
- Consistent documentation style
- Evergreen code (no version references)

### New Examples Created

#### 1. `basic_rendering.py` (99 lines)
**Purpose:** Minimal complete rendering pipeline

**Demonstrates:**
- Volume creation with synthetic sphere dataset
- Renderer setup with balanced quality preset
- Camera configuration (front view)
- Transfer function application (viridis + linear opacity)
- Rendering and matplotlib display

**Key features:**
- ABOUTME headers for greppability
- Heavy inline comments (~1 comment per 2-3 lines)
- Simple, copy-paste ready
- Complete workflow in ~60 lines of code

#### 2. `camera_demo.py` (164 lines)
**Purpose:** Camera system capabilities demonstration

**Demonstrates:**
- 4 camera presets (front, side, top, isometric)
- CameraController for manual manipulation (orbit)
- CameraPath for keyframe interpolation
- 2×3 grid displaying 6 different views with parameters

**Key features:**
- Shows all three camera system components
- Each view labeled with azimuth, elevation, distance
- Double_sphere dataset (interesting from multiple angles)
- Progress messages for each rendered view

#### 3. `transfer_functions_demo.py` (195 lines)
**Purpose:** Transfer function configurations showcase

**Demonstrates:**
- Linear opacity + viridis colormap
- Peak opacity + plasma colormap
- Step opacity + coolwarm colormap
- Wide peaks opacity + jet colormap
- 2×2 grid with TF visualizations below each render

**Key features:**
- Uses only available OpacityTransferFunction methods
- Transfer function plots showing colormap + opacity curve
- Torus dataset (shows TF effects well)
- GridSpec layout with image + TF visualization pairs

**Note:** Originally planned to use `gaussian()` and `from_control_points()` methods, but these don't exist in the API. Replaced with `one_step()` and different `peaks()` configurations using available methods.

#### 4. `benchmark.py` (187 lines)
**Purpose:** Performance comparison across quality presets

**Demonstrates:**
- All 5 quality presets (preview → ultra)
- Timing statistics (mean, std, FPS, speedup)
- Configuration details (step_size, max_steps, samples/ray)
- Recommendations for each preset use case

**Key features:**
- Warmup run before timing (GPU initialization)
- 10 iterations per preset for statistical accuracy
- Speedup calculated relative to balanced preset
- 256³ volume for realistic workload testing
- Formatted tables with clear metrics

### Examples Deleted

All old examples removed from `example/ModernglRender/`:
- `enhanced_camera_demo.py` (243 lines) - Replaced by `camera_demo.py`
- `interactive_interface_demo.py` (71 lines) - Not needed (interface is core functionality)
- `multiview_example.py` (156 lines) - Functionality merged into `camera_demo.py`
- `rgba_demo.py` (127 lines) - Functionality covered by `basic_rendering.py`
- `v031_features_demo.py` (124 lines) - Version-specific, not needed
- Orphaned `pyvr/` directory
- Orphaned `tests/` directory

### Documentation Updates

**CLAUDE.md:**
- Updated "Running Examples" section (lines 73-86)
- Replaced all references to `example/ModernglRender/*` with `example/*`
- New example commands:
  - `python example/basic_rendering.py`
  - `python example/camera_demo.py`
  - `python example/transfer_functions_demo.py`
  - `python example/benchmark.py`

**README.md:**
- Updated examples section (lines 552-567)
- Removed reference to `v031_features_demo.py` (line 164)
- Updated example descriptions to match new structure
- Quick Start code verified consistent with current API (no changes needed)

### Code Style Standards

All new examples follow consistent patterns:

**File Structure:**
```python
# ABOUTME: Brief one-line description of what this example demonstrates
# ABOUTME: Second line with key technical details

"""
Docstring title

Longer description of what this example shows.
Lists key PyVR features demonstrated.
"""

import statements (grouped: stdlib, third-party, pyvr)

# Constants at top
VOLUME_SIZE = 128
IMAGE_RES = 512

def main():
    """Run the demo."""
    # Heavy inline comments explaining each step
    ...

if __name__ == "__main__":
    main()
```

**Style Rules Applied:**
- ABOUTME headers (2 lines) for greppability
- Heavy inline comments explaining WHY, not just WHAT
- No version references (no "v0.2.6", "new in", "improved")
- No temporal language (no "old", "legacy", "enhanced")
- Simple variable names (volume, renderer, camera)
- Explicit parameter passing (show defaults)
- Print statements for progress feedback
- Module-level constants (UPPER_CASE)

### Files Modified/Created

**Created:**
- `example/basic_rendering.py` (99 lines)
- `example/camera_demo.py` (164 lines)
- `example/transfer_functions_demo.py` (195 lines)
- `example/benchmark.py` (187 lines)

**Modified:**
- `CLAUDE.md` (10 lines changed: 5 insertions, 5 deletions)
- `README.md` (18 lines changed: 8 insertions, 10 deletions)

**Deleted:**
- `example/ModernglRender/` (entire directory with 7 files)
- `example/benchmark.py` (old version, replaced)

**Total line changes:**
- Added: 645 lines (new examples)
- Removed: 1,075 lines (old examples + orphaned files)
- Net: -430 lines (cleaner, more focused codebase)

## Backward Compatibility

**Breaking Changes:** None

**API Changes:** None - examples only

**Migration Required:** None

**Notes:**
- Old example scripts deleted but API unchanged
- Users with custom examples based on old structure can reference new examples
- All existing PyVR code continues to work

## Benefits

1. **Improved Usability:**
   - Flat structure easier to navigate
   - Clear, focused examples
   - Copy-paste friendly code

2. **Better Documentation:**
   - Heavy inline comments for beginners
   - Consistent style across all examples
   - ABOUTME headers for quick searching

3. **Easier Maintenance:**
   - 4 focused examples vs 5 overlapping ones
   - No version-specific examples
   - Evergreen code (no temporal references)

4. **Cleaner Codebase:**
   - Removed orphaned directories
   - Removed 430 net lines of code
   - Single source of truth for each concept

5. **Performance Demonstration:**
   - Benchmark example shows quality/speed tradeoffs
   - Helps users choose appropriate presets
   - Realistic workload testing (256³ volume)

6. **Transfer Function Clarity:**
   - Shows multiple opacity patterns
   - Visual plots with colormap + opacity curve
   - Uses only available API methods

7. **Camera System Coverage:**
   - All three components demonstrated (presets, controller, path)
   - Visual comparison of different angles
   - Parameter labels for learning

## Known Issues

None.

## Example Usage

### Basic Rendering
```python
# Run the minimal pipeline example
python example/basic_rendering.py

# Shows: sphere with viridis colormap
# Demonstrates: complete rendering workflow in ~60 lines
```

### Camera System
```python
# Run the camera demonstration
python example/camera_demo.py

# Shows: 6 views (4 presets + controller + animation)
# Demonstrates: camera presets, orbit manipulation, interpolation
```

### Transfer Functions
```python
# Run the transfer function showcase
python example/transfer_functions_demo.py

# Shows: 4 different opacity patterns with visualizations
# Demonstrates: linear, peaks, step, and wide peaks opacity
```

### Performance Benchmark
```python
# Run the quality preset comparison
python example/benchmark.py

# Shows: timing tables for all 5 presets
# Demonstrates: performance characteristics and recommendations
```

## Testing

**Example Verification:**
- ✅ `basic_rendering.py` - Executes without errors, displays sphere
- ✅ `camera_demo.py` - Executes without errors, displays 6 views
- ✅ `transfer_functions_demo.py` - Executes without errors, displays 4 TF configs
- ✅ `benchmark.py` - Executes without errors, displays timing tables

**Performance Validation:**
- Preview: ~2-3 ms (340-510 FPS) - Fastest
- Fast: ~3-4 ms (300-350 FPS) - Interactive
- Balanced: ~4-5 ms (200-240 FPS) - Default
- High Quality: ~6-7 ms (130-150 FPS) - Production
- Ultra Quality: ~24-25 ms (40 FPS) - Maximum quality

**Test Count:** 398 tests (unchanged - examples are documentation, not tested)

**Coverage:** ~86% (unchanged)

## Development Notes

### Phase Plan Execution

Implementation followed structured 6-phase plan:

1. **Phase 01:** Cleanup - Delete old examples and orphaned directories
2. **Phase 02:** Create basic_rendering.py
3. **Phase 03:** Create camera_demo.py
4. **Phase 04:** Create transfer_functions_demo.py
5. **Phase 05:** Create benchmark.py
6. **Phase 06:** Update documentation and verify

All phases completed with individual git commits for clear history.

### Design Decisions

**Why flat structure?**
- Simpler navigation
- No anticipated need for categorization
- Follows YAGNI principle

**Why 4 examples instead of 5+?**
- Covers all core functionality
- No duplication
- Each example has clear, distinct purpose

**Why no interactive demo?**
- Interactive interface is core functionality, not an example
- Already has dedicated module: `pyvr.interface`
- Users launch it directly, not via example script

**Why heavy inline comments?**
- Target audience: new users learning PyVR
- Examples are learning resources, not production code
- Copy-paste usability requires understanding

**Why ABOUTME headers?**
- Greppable documentation
- Quick file identification
- Consistent pattern across examples

## Git Commits

This release consists of 7 commits:

1. `48545cd` - docs(plans): Add v0.3.4 examples rework design
2. `8c7b434` - docs(plans): Add v0.3.4 implementation phase plans
3. `08c7505` - refactor(examples): Remove old examples and orphaned directories
4. `bd78e9b` - feat(examples): Add basic_rendering.py example
5. `e0a1d98` - feat(examples): Add camera_demo.py example
6. `7d4caed` - feat(examples): Add transfer_functions_demo.py example
7. `017eefd` - feat(examples): Add benchmark.py example
8. `b232207` - docs: Update examples documentation for v0.3.4

## Contributors

- Claude Code (implementation, design, planning)
- Feature design and planning validated through interactive process
